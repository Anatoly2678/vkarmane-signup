{"version":3,"file":"signin.bundle.js","sources":["webpack:///src/signin.js","webpack:///./~/js-cookie/src/js.cookie.js"],"sourcesContent":["import cookie from 'js-cookie'\r\nimport React from 'react'\r\nimport ReactDOM from 'react-dom'\r\n\r\nconst SigninForm = React.createClass({\r\n    getInitialState() {\r\n        return {\r\n            email:'',\r\n            password: '',\r\n            showAlert: false,\r\n            aalertText: ''\r\n        }\r\n    },\r\n    render() {\r\n        var alert = (\r\n            <div className=\"alert alert-danger\" role=\"alert\">\r\n                <small>{this.state.alertText}</small>\r\n            </div>)\r\n\r\n        return (\r\n            <form className=\"form-signin\" onSubmit={this.handleSubmit}>\r\n                <h2 className=\"form-signin-heading\">Вход</h2>\r\n\r\n                {this.state.showAlert ? alert : null}\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"inputEmail\">Ваш email</label>\r\n                    <input type=\"email\" id=\"inputEmail\" className=\"form-control\"\r\n                           placeholder=\"Укажите ваш email\" required autoFocus\r\n                           value={this.state.email} onChange={this.handleEmailChange} />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"inputPassword\">Пароль</label>\r\n                    <input type=\"password\" id=\"inputPassword\" className=\"form-control\"\r\n                           placeholder=\"Введите пароль\" required\r\n                           value={this.state.password} onChange={this.handlePasswordChange} />\r\n                </div>\r\n\r\n                <div className=\"row\">\r\n                    <div className=\"col-sm-6\">\r\n                        <button type=\"submit\" className=\"btn btn-primary btn-block\">Войти</button>\r\n                    </div>\r\n                    <div className=\"col-sm-6\">\r\n                        <button type=\"button\" onClick={this.handleRecovery} className=\"btn btn-link btn-block\">\r\n                            Забыли пароль?\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        )\r\n    },\r\n    handleEmailChange(e) {\r\n        this.setState({email:e.target.value})\r\n    },\r\n    handlePasswordChange(e) {\r\n        this.setState({password:e.target.value})\r\n    },\r\n    handleSubmit(e) {\r\n        e.preventDefault()\r\n\r\n        $.ajax({\r\n            type: \"POST\",\r\n            url: '/ServiceModel/AuthService.svc/Login',\r\n            data: JSON.stringify({\r\n                TimeZoneOffset: new Date().getTimezoneOffset(),\r\n                UserName: this.state.email,\r\n                UserPassword: this.state.password,\r\n                WorkspaceName: 'Default'\r\n            }),\r\n            contentType: 'application/json',\r\n            dataType: 'json',\r\n            success: this.handleLoginResult,\r\n            error: this.handleLoginError\r\n        })\r\n    },\r\n    handleLoginResult(result) {\r\n        if(result['Code'] != 0) {\r\n            this.setState({\r\n                password: '',\r\n                showAlert: true,\r\n                alertText: result['Message']\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        $.ajax({\r\n            type: \"POST\",\r\n            url: '/0/rest/LeadGeneratorService/SaveReferralIntoSession',\r\n            data: JSON.stringify({\r\n                param: cookie.get('lead_generator_referral')\r\n            }),\r\n            contentType: 'application/json',\r\n            dataType: 'json',\r\n            success: () => location.replace('/0/Nui/ViewModule.aspx'),\r\n            error: () => location.replace('/0/Nui/ViewModule.aspx')\r\n        })\r\n    },\r\n    handleLoginError(xhr, status, err) {\r\n        this.setState({\r\n            showAlert: true,\r\n            alertText: err.toString()\r\n        })\r\n    },\r\n    handleRecovery() {\r\n        location.replace('/Recovery.aspx')\r\n    }\r\n})\r\n\r\nReactDOM.render(<SigninForm />, document.getElementById('content'))\n\n\n/** WEBPACK FOOTER **\n ** src/signin.js\n **/","/*!\n * JavaScript Cookie v2.1.2\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t} else if (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\treturn (document.cookie = [\n\t\t\t\t\tkey, '=', value,\n\t\t\t\t\tattributes.expires && '; expires=' + attributes.expires.toUTCString(), // use expires attribute, max-age is not supported by IE\n\t\t\t\t\tattributes.path    && '; path=' + attributes.path,\n\t\t\t\t\tattributes.domain  && '; domain=' + attributes.domain,\n\t\t\t\t\tattributes.secure ? '; secure' : ''\n\t\t\t\t].join(''));\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api(key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/js-cookie/src/js.cookie.js\n ** module id = 198\n ** module chunks = 1 2\n **/"],"mappings":";;;;;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;;;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AADA;AACA;AAGA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAJA;AAMA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAJA;AAOA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AADA;AAGA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AADA;AAJA;AAlBA;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AAZA;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AATA;AAWA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAtGA;AACA;AAwGA;;;;;;;AC7GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;","sourceRoot":""}