{"version":3,"file":"signin.bundle.js","sources":["webpack:///src/signin.js"],"sourcesContent":["import cookie from 'js-cookie'\r\nimport React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport Header from './components/vk-master'\r\n\r\nconst SigninForm = React.createClass({\r\n    getInitialState() {\r\n        return {\r\n            email:'',\r\n            password: '',\r\n            showAlert: false,\r\n            aalertText: ''\r\n        }\r\n    },\r\n    render() {\r\n        var alert = (\r\n            <div className=\"alert alert-danger\" role=\"alert\">\r\n                <small>{this.state.alertText}</small>\r\n            </div>)\r\n\r\n        return (\r\n            <form className=\"form-signin\" onSubmit={this.handleSubmit}>\r\n                <h2 className=\"form-signin-heading\">Вход</h2>\r\n                <div className=\"form-signin-heading-underline\"></div>\r\n\r\n                {this.state.showAlert ? alert : null}\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"inputEmail\">Ваш email</label>\r\n                    <input type=\"email\" id=\"inputEmail\" className=\"form-control\"\r\n                           placeholder=\"Укажите ваш email\" required autoFocus\r\n                           value={this.state.email} onChange={this.handleEmailChange} />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"inputPassword\">Пароль</label>\r\n                    <input type=\"password\" id=\"inputPassword\" className=\"form-control\"\r\n                           placeholder=\"Введите пароль\" required\r\n                           value={this.state.password} onChange={this.handlePasswordChange} />\r\n                </div>\r\n\r\n                <div className=\"row\">\r\n                    <div className=\"col-sm-6\">\r\n                        <button type=\"submit\" className=\"btn btn-primary btn-block\">Войти</button>\r\n                    </div>\r\n                    <div className=\"col-sm-6\">\r\n                        <button type=\"button\" onClick={this.handleRecovery} className=\"btn btn-link btn-block\">\r\n                            Забыли пароль?\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        )\r\n    },\r\n    handleEmailChange(e) {\r\n        this.setState({email:e.target.value})\r\n    },\r\n    handlePasswordChange(e) {\r\n        this.setState({password:e.target.value})\r\n    },\r\n    handleSubmit(e) {\r\n        e.preventDefault()\r\n\r\n        $.ajax({\r\n            type: \"POST\",\r\n            url: '/ServiceModel/AuthService.svc/Login',\r\n            data: JSON.stringify({\r\n                TimeZoneOffset: new Date().getTimezoneOffset(),\r\n                UserName: this.state.email,\r\n                UserPassword: this.state.password,\r\n                WorkspaceName: 'Default'\r\n            }),\r\n            contentType: 'application/json',\r\n            dataType: 'json',\r\n            success: this.handleLoginResult,\r\n            error: this.handleLoginError\r\n        })\r\n    },\r\n    handleLoginResult(result) {\r\n        if(result['Code'] != 0) {\r\n            this.setState({\r\n                password: '',\r\n                showAlert: true,\r\n                alertText: result['Message']\r\n            })\r\n\r\n            return\r\n        }\r\n\r\n        $.ajax({\r\n            type: \"POST\",\r\n            url: '/0/rest/LeadGeneratorService/SaveReferralIntoSession',\r\n            data: JSON.stringify({\r\n                param: cookie.get('lead_generator_referral')\r\n            }),\r\n            contentType: 'application/json',\r\n            dataType: 'json',\r\n            success: () => location.replace('/0/Nui/ViewModule.aspx'),\r\n            error: () => location.replace('/0/Nui/ViewModule.aspx')\r\n        })\r\n    },\r\n    handleLoginError(xhr, status, err) {\r\n        this.setState({\r\n            showAlert: true,\r\n            alertText: err.toString()\r\n        })\r\n    },\r\n    handleRecovery() {\r\n        location.replace('/recovery.html')\r\n    }\r\n});\r\n\r\nconst SigninPage = React.createClass({\r\n        render: function() {\r\n            return (\r\n                <div>\r\n                    <div className=\"header clearfix\">\r\n                        < Header />\r\n                    </div>\r\n                    < SigninForm />\r\n                </div>\r\n            );\r\n        }\r\n    });\r\n\r\nReactDOM.render( < SigninPage />, document.getElementById('content'))\n\n\n/** WEBPACK FOOTER **\n ** src/signin.js\n **/"],"mappings":";;;;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;;;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AADA;AACA;AAGA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAJA;AAMA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAJA;AAOA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AADA;AAGA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AADA;AAJA;AAnBA;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AAZA;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AATA;AAWA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAvGA;AACA;AAyGA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AADA;AAGA;AAJA;AAOA;AAVA;AACA;AAYA;;;","sourceRoot":""}