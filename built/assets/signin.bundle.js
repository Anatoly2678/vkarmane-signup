webpackJsonp([3],{0:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var r=a(54),l=n(r),o=a(6),i=n(o),s=a(62),c=n(s),u=i["default"].createClass({displayName:"SigninForm",getInitialState:function(){return{email:"",password:"",showAlert:!1,aalertText:""}},render:function(){var e=i["default"].createElement("div",{className:"alert alert-danger",role:"alert"},i["default"].createElement("small",null,this.state.alertText));return i["default"].createElement("form",{className:"form-signin",onSubmit:this.handleSubmit},i["default"].createElement("h2",{className:"form-signin-heading"},"Вход"),i["default"].createElement("div",{className:"form-signin-heading-underline"}),this.state.showAlert?e:null,i["default"].createElement("div",{className:"form-group"},i["default"].createElement("label",{htmlFor:"inputEmail"},"Ваш email"),i["default"].createElement("input",{type:"email",id:"inputEmail",className:"form-control",placeholder:"Укажите ваш email",required:!0,autoFocus:!0,value:this.state.email,onChange:this.handleEmailChange})),i["default"].createElement("div",{className:"form-group"},i["default"].createElement("label",{htmlFor:"inputPassword"},"Пароль"),i["default"].createElement("input",{type:"password",id:"inputPassword",className:"form-control",placeholder:"Введите пароль",required:!0,value:this.state.password,onChange:this.handlePasswordChange})),i["default"].createElement("div",{className:"row"},i["default"].createElement("div",{className:"col-sm-6"},i["default"].createElement("button",{type:"submit",className:"btn btn-primary btn-block"},"Войти")),i["default"].createElement("div",{className:"col-sm-6"},i["default"].createElement("button",{type:"button",onClick:this.handleRecovery,className:"btn btn-link btn-block"},"Забыли пароль?"))))},handleEmailChange:function(e){this.setState({email:e.target.value})},handlePasswordChange:function(e){this.setState({password:e.target.value})},handleSubmit:function(e){e.preventDefault(),$.ajax({type:"POST",url:"/ServiceModel/AuthService.svc/Login",data:JSON.stringify({TimeZoneOffset:(new Date).getTimezoneOffset(),UserName:this.state.email,UserPassword:this.state.password,WorkspaceName:"Default"}),contentType:"application/json",dataType:"json",success:this.handleLoginResult,error:this.handleLoginError})},handleLoginResult:function(e){return 0!=e.Code?void this.setState({password:"",showAlert:!0,alertText:e.Message}):void $.ajax({type:"POST",url:"/0/rest/LeadGeneratorService/SaveReferralIntoSession",data:JSON.stringify({param:l["default"].get("lead_generator_referral")}),contentType:"application/json",dataType:"json",success:function(){return location.replace("/0/Nui/ViewModule.aspx")},error:function(){return location.replace("/0/Nui/ViewModule.aspx")}})},handleLoginError:function(e,t,a){this.setState({showAlert:!0,alertText:a.toString()})},handleRecovery:function(){location.replace("/Recovery.aspx")}});c["default"].render(i["default"].createElement(u,null),document.getElementById("content"))},54:function(e,t,a){var n,r;!function(l){n=l,r="function"==typeof n?n.call(t,a,t,e):n,!(void 0!==r&&(e.exports=r))}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var a=arguments[e];for(var n in a)t[n]=a[n]}return t}function t(a){function n(t,r,l){var o;if("undefined"!=typeof document){if(arguments.length>1){if(l=e({path:"/"},n.defaults,l),"number"==typeof l.expires){var i=new Date;i.setMilliseconds(i.getMilliseconds()+864e5*l.expires),l.expires=i}try{o=JSON.stringify(r),/^[\{\[]/.test(o)&&(r=o)}catch(s){}return r=a.write?a.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",r,l.expires&&"; expires="+l.expires.toUTCString(),l.path&&"; path="+l.path,l.domain&&"; domain="+l.domain,l.secure?"; secure":""].join("")}t||(o={});for(var c=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,d=0;d<c.length;d++){var m=c[d].split("="),f=m.slice(1).join("=");'"'===f.charAt(0)&&(f=f.slice(1,-1));try{var p=m[0].replace(u,decodeURIComponent);if(f=a.read?a.read(f,p):a(f,p)||f.replace(u,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(s){}if(t===p){o=f;break}t||(o[p]=f)}catch(s){}}return o}}return n.set=n,n.get=function(e){return n(e)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(t,a){n(t,"",e(a,{expires:-1}))},n.withConverter=t,n}return t(function(){})})}});
//# sourceMappingURL=signin.bundle.js.map