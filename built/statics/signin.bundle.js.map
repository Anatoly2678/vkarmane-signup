{"version":3,"file":"signin.bundle.js","sources":["webpack:///src/signin.js","webpack:///src/components/signin-form.js","webpack:///./~/js-cookie/src/js.cookie.js"],"sourcesContent":["import React from 'react'\nimport ReactDOM from 'react-dom'\nimport Header from './components/vk-master'\nimport SigninForm from './components/signin-form'\n\nconst SigninPage = React.createClass({\n    render: function() {\n        return (\n            <div>\n                <div className=\"header clearfix\">\n                    <Header />\n                </div>\n                <SigninForm />\n            </div>\n        )\n    }\n})\n\nReactDOM.render(<SigninPage />, document.getElementById('content'))\n\n\n/** WEBPACK FOOTER **\n ** src/signin.js\n **/","import cookie from 'js-cookie'\nimport React from 'react'\n\nexport default React.createClass({\n    getInitialState() {\n        return {\n            email:'',\n            password: '',\n            showAlert: false,\n            alertText: '',\n            waiting: false\n        }\n    },\n    render() {\n        var alert = (\n            <div className=\"alert alert-danger\" role=\"alert\">\n                <small>{this.state.alertText}</small>\n            </div>)\n\n        return (\n            <form className=\"form-signin\" onSubmit={this.handleSubmit}>\n                <h2 className=\"form-signin-heading\">Вход</h2>\n                <div className=\"form-signin-heading-underline\"></div>\n\n                {this.state.showAlert ? alert : null}\n\n                <div className=\"form-group\">\n                    <label htmlFor=\"inputEmail\">Ваш e-mail</label>\n                    <input\n                        type=\"email\" id=\"inputEmail\" className=\"form-control\"\n                        placeholder=\"Укажите ваш e-mail\" required autoFocus\n                        value={this.state.email} onChange={this.handleEmailChange}\n                        readOnly={this.state.waiting} />\n                </div>\n                <div className=\"form-group\">\n                    <label htmlFor=\"inputPassword\">Пароль</label>\n                    <input\n                        type=\"password\" id=\"inputPassword\" className=\"form-control\"\n                        placeholder=\"Введите пароль\" required\n                        value={this.state.password} onChange={this.handlePasswordChange}\n                        readOnly={this.state.waiting} />\n                </div>\n\n                <div className=\"row\">\n                    <div className=\"col-sm-6\">\n                        <button\n                            type=\"submit\" className=\"btn btn-primary btn-block\"\n                            readOnly={this.state.waiting}>\n                            {!this.state.waiting ? 'Войти' : 'Вход...' }\n                        </button>\n                    </div>\n                    <div className=\"col-sm-6\">\n                        <button\n                            type=\"button\" onClick={this.handleRecovery}\n                            className=\"btn btn-link btn-block\" style={{paddingLeft:'0', paddingRight:'0' }}>\n                            Забыли пароль?\n                        </button>\n                    </div>\n                </div>\n            </form>\n        )\n    },\n    handleEmailChange(e) {\n        this.setState({email:e.target.value})\n    },\n    handlePasswordChange(e) {\n        this.setState({password:e.target.value})\n    },\n    handleSubmit(e) {\n        e.preventDefault()\n\n        this.setState({waiting: true})\n\n        $.ajax({\n            type: \"POST\",\n            url: '/ServiceModel/AuthService.svc/Login',\n            data: JSON.stringify({\n                TimeZoneOffset: new Date().getTimezoneOffset(),\n                UserName: this.state.email,\n                UserPassword: this.state.password,\n                WorkspaceName: 'Default'\n            }),\n            contentType: 'application/json',\n            dataType: 'json',\n            success: this.handleLoginResult,\n            error: this.handleLoginError\n        })\n    },\n    handleLoginResult(result) {\n        this.setState({waiting: false})\n\n        if(result['Code'] != 0) {\n            this.setState({\n                password: '',\n                showAlert: true,\n                alertText: result['Message']\n            })\n\n            return\n        }\n\n        $.ajax({\n            type: \"POST\",\n            url: '/0/rest/LeadGeneratorService/SaveReferralIntoSession',\n            data: JSON.stringify({\n                param: cookie.get('lead_generator_referral')\n            }),\n            contentType: 'application/json',\n            dataType: 'json',\n            success: () => location.replace('/0/Nui/ViewModule.aspx'),\n            error: () => location.replace('/0/Nui/ViewModule.aspx')\n        })\n    },\n    handleLoginError(xhr, status, err) {\n        this.setState({\n            showAlert: true,\n            alertText: err.toString(),\n            waiting: false\n        })\n    },\n    handleRecovery() {\n        location.replace('/recovery.html')\n    }\n});\n\n\n/** WEBPACK FOOTER **\n ** src/components/signin-form.js\n **/","/*!\n * JavaScript Cookie v2.1.2\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t} else if (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\treturn (document.cookie = [\n\t\t\t\t\tkey, '=', value,\n\t\t\t\t\tattributes.expires && '; expires=' + attributes.expires.toUTCString(), // use expires attribute, max-age is not supported by IE\n\t\t\t\t\tattributes.path    && '; path=' + attributes.path,\n\t\t\t\t\tattributes.domain  && '; domain=' + attributes.domain,\n\t\t\t\t\tattributes.secure ? '; secure' : ''\n\t\t\t\t].join(''));\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api(key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/js-cookie/src/js.cookie.js\n ** module id = 214\n ** module chunks = 1 2\n **/"],"mappings":";;;;;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;;;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AADA;AAGA;AAJA;AAOA;AAVA;AACA;AAYA;;;;;;;;;;;;;AClBA;AACA;;;AAAA;AACA;;;;;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AADA;AACA;AAGA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AANA;AASA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AADA;AAOA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AADA;AARA;AAvBA;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AAZA;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AATA;AAWA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAvHA;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;","sourceRoot":""}